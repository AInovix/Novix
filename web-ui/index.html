<!-- web-ui/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novix AI Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-6" x-data="dashboard()">
        <!-- Header -->
        <header class="mb-8">
            <h1 class="text-4xl font-bold text-blue-600">
                <img src="https://i.postimg.cc/hG8kKqpX/Novix-banner.png" alt="Novix Logo" class="h-20">
            </h1>
            <div class="flex gap-4 mt-4">
                <button @click="currentTab = 'playground'" class="tab-btn">AI Playground</button>
                <button @click="currentTab = 'config'" class="tab-btn">Configuration</button>
                <button @click="currentTab = 'monitor'" class="tab-btn">System Monitor</button>
            </div>
        </header>

        <!-- AI Playground Tab -->
        <div x-show="currentTab === 'playground'" class="bg-white rounded-lg p-6 shadow-md">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Chat Interface -->
                <div class="space-y-4">
                    <h2 class="text-xl font-semibold">Interactive Chat</h2>
                    <div class="h-96 overflow-y-auto border rounded-lg p-4 bg-gray-50">
                        <div x-html="chatHistory" class="space-y-2"></div>
                    </div>
                    <div class="flex gap-2">
                        <input x-model="userInput" type="text" 
                               class="flex-1 border rounded-lg p-2"
                               placeholder="Ask Novix anything...">
                        <select x-model="selectedModel" class="border rounded-lg p-2">
                            <option value="deepseek">DeepSeek</option>
                            <option value="gpt-4">GPT-4</option>
                            <option value="gemini">Gemini</option>
                        </select>
                        <button @click="sendMessage()" class="bg-blue-600 text-white px-4 py-2 rounded-lg">
                            Send
                        </button>
                    </div>
                </div>

                <!-- Code Generator -->
                <div>
                    <h2 class="text-xl font-semibold mb-4">API Code Generator</h2>
                    <div class="space-y-4">
                        <select x-model="selectedLanguage" class="w-full border rounded-lg p-2">
                            <option value="python">Python</option>
                            <option value="javascript">JavaScript</option>
                            <option value="curl">cURL</option>
                        </select>
                        <pre class="bg-gray-800 text-white p-4 rounded-lg overflow-x-auto"><code x-text="generateCodeSnippet()"></code></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- Configuration Tab -->
        <div x-show="currentTab === 'config'" class="bg-white rounded-lg p-6 shadow-md">
            <h2 class="text-xl font-semibold mb-4">Provider Configuration</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- DeepSeek Configuration -->
                <div class="space-y-4">
                    <h3 class="font-medium text-blue-600">DeepSeek Settings</h3>
                    <div class="space-y-2">
                        <input type="text" placeholder="API Key" 
                               class="w-full border rounded-lg p-2"
                               x-model="config.deepseek.apiKey">
                        <select class="w-full border rounded-lg p-2"
                                x-model="config.deepseek.model">
                            <option value="deepseek-coder">Coder</option>
                            <option value="deepseek-chat">Chat</option>
                        </select>
                    </div>
                </div>

                <!-- Other Providers -->
                <div class="space-y-4">
                    <h3 class="font-medium text-purple-600">Other AI Providers</h3>
                    <div class="space-y-2">
                        <input type="text" placeholder="OpenAI Key" 
                               class="w-full border rounded-lg p-2"
                               x-model="config.openai.apiKey">
                        <input type="text" placeholder="Gemini Key"
                               class="w-full border rounded-lg p-2"
                               x-model="config.gemini.apiKey">
                    </div>
                </div>
            </div>
            <button @click="saveConfig()" class="mt-4 bg-green-600 text-white px-4 py-2 rounded-lg">
                Save Configuration
            </button>
        </div>

        <!-- System Monitor Tab -->
        <div x-show="currentTab === 'monitor'" class="bg-white rounded-lg p-6 shadow-md">
            <h2 class="text-xl font-semibold mb-4">System Health</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-blue-50 p-4 rounded-lg">
                    <p class="text-sm text-gray-600">API Calls</p>
                    <p class="text-2xl font-bold" x-text="metrics.apiCalls"></p>
                </div>
                <div class="bg-green-50 p-4 rounded-lg">
                    <p class="text-sm text-gray-600">Response Time</p>
                    <p class="text-2xl font-bold" x-text="`${metrics.avgResponseTime}ms`"></p>
                </div>
                <div class="bg-yellow-50 p-4 rounded-lg">
                    <p class="text-sm text-gray-600">Active Models</p>
                    <p class="text-2xl font-bold" x-text="metrics.activeModels"></p>
                </div>
                <div class="bg-red-50 p-4 rounded-lg">
                    <p class="text-sm text-gray-600">Errors</p>
                    <p class="text-2xl font-bold" x-text="metrics.errors"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function dashboard() {
            return {
                currentTab: 'playground',
                userInput: '',
                chatHistory: '',
                selectedModel: 'deepseek',
                selectedLanguage: 'python',
                config: {
                    deepseek: { apiKey: '', model: 'deepseek-coder' },
                    openai: { apiKey: '' },
                    gemini: { apiKey: '' }
                },
                metrics: {
                    apiCalls: 0,
                    avgResponseTime: 0,
                    activeModels: 3,
                    errors: 0
                },

                async sendMessage() {
                    const message = this.userInput;
                    this.chatHistory += `<div class="user-message">You: ${message}</div>`;
                    
                    try {
                        const response = await axios.post('/api/chat', {
                            message,
                            model: this.selectedModel,
                            config: this.config
                        });
                        
                        this.chatHistory += `
                            <div class="ai-response bg-blue-50 p-2 rounded mt-2">
                                ${this.selectedModel}: ${response.data.response}
                            </div>`;
                    } catch (error) {
                        this.chatHistory += `
                            <div class="error bg-red-50 p-2 rounded mt-2">
                                Error: ${error.response?.data?.error || 'API call failed'}
                            </div>`;
                    }
                    
                    this.userInput = '';
                },

                generateCodeSnippet() {
                    const templates = {
                        python: `import novix\n\nresponse = novix.query(\n    "${this.userInput}",\n    model="${this.selectedModel}"\n)`,
                        javascript: `fetch('/api/chat', {\n    method: 'POST',\n    body: JSON.stringify({\n        message: "${this.userInput}",\n        model: "${this.selectedModel}"\n    })\n})`,
                        curl: `curl -X POST /api/chat \\\n    -d '{"message": "${this.userInput}", "model": "${this.selectedModel}"}'`
                    };
                    return templates[this.selectedLanguage];
                },

                async saveConfig() {
                    try {
                        await axios.post('/api/config', this.config);
                        alert('Configuration saved successfully!');
                    } catch (error) {
                        alert('Error saving configuration');
                    }
                }
            }
        }
    </script>
</body>
</html>
